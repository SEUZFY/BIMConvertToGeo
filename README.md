# BIMConvertToGeo
Convert a BIM model(IFC file) to a CityJSON file.

<img src="https://user-images.githubusercontent.com/72781910/161611724-60f5be17-fc03-4d14-a406-2ac0c6a38c41.PNG" width="600" height="300">

# HOW TO USE

This project can be cloned at: https://github.com/SEUZFY/BIMConvertToGeo.git.

Compile and run it directly, no extra parameters are needed.

This program has been successfully run on a `x64 - windows 10 @Intel core` platform, specific settings are available [here](https://github.com/SEUZFY/BIMConvertToGeo/blob/master/CMakeSettings.json).

**NB** : 

* Before you compile this program, please make sure that you have the [dependencies](https://github.com/SEUZFY/BIMConvertToGeo#dependencies).

* If the compilation fails, you might want to check the [CMakeLists.txt](https://github.com/SEUZFY/BIMConvertToGeo/blob/master/CMakeLists.txt) file.

# Basic Info
`data` : All input and output files.

`figure` : All relevant figures.

`include` : External dependencies for this project.

`report` : The report of this project.

`src` : All source files.

# Dependencies

`CGAL` - https://www.cgal.org/

`nlohmann json` - https://github.com/nlohmann/json

# DATA

The [data](https://github.com/SEUZFY/BIMConvertToGeo/tree/master/data) folder contains three folders.

## inputData folder

`KIT.ifc` : the IFC file downloaded [here](http://openifcmodel.cs.auckland.ac.nz/Model/Details/109).

`KIT.obj` : he converted file generated by `IfcConvert`.

`KIT.mtl` : the corresponding material file of `KIT.obj`, help to color the materials when opened in MeshLab.

This program takes the `KIT.obj` file as the **input** file.

## intermediateData folder

**The files in this folder are generated by the program to help for the follow-up process**.

`1~33.obj` : the OBJ files generated by the program indicating the 33 shells in the input `KIT.obj` file.

`KIT.output.obj` : Basically the same file as `KIT.obj`, mainly for testing whether the loading functions are right or not.

`KIT.repeated.vertices.txt` : Contains repeated vertices info in `KIT.obj` file, including the vertex indices and coordinates.

`KIT.repeated.faces.txt` : Contains the faces which have repeated vertices, with original indices and new indices(after repeated process).

`KIT.new.vertices.txt` : Contains the vertices info after cleaning.

`KIT.new.faces.txt` : Contains the faces info after cleaning.

## outputData folder

`mybuilding.city.json` : the **result** file of the converting process.

`mybuilding.ExcludeExterior.city.json` : a modified result file, mainly help for visualization in [ninja](https://ninja.cityjson.org/).

# WHAT TO EXPECT

`The converted CityJSON file - mybuilding.city.json`:

<img src="https://user-images.githubusercontent.com/72781910/161613061-d1625a48-8ef8-4e77-a5c8-8a5c971219c4.PNG" width="300" height="230">

`Internal Structures - mybuilding.ExcludeExterior.city.json`:

<img src="https://user-images.githubusercontent.com/72781910/161613508-09cf5cee-66d7-4d4e-9210-0a652e6cb2a6.PNG" width="300" height="230">

Visualized in [ninja](https://ninja.cityjson.org/).

# Special Thanks

Ken Arroyo Ohori - k.ohori@tudelft.nl --> [more info](https://3d.bk.tudelft.nl/ken/en/)

Ken's kindly given [guidance](https://3d.bk.tudelft.nl/courses/geo1004//hw/3/) helps us to develop our code and our questions are always answered quickly and accurately, without which this project would not have been possible to be delivered.


# Contributors

Yitong  - xiayitong0630@gmail.com

As for reading input OBJ file and build convex hulls directly, please refer to: https://github.com/YitongXia/BIM_processing.git

Fengyan - zmocheng@gmail.com

